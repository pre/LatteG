\documentclass[english,gradu]{tktltiki}
\usepackage{ae,aecompl}
\usepackage{url}
\usepackage{amsfonts}
\usepackage{color}
\usepackage{graphicx}

% MEMO:
%   Teksti etenee kuin haluaisi hyvän oppikirjan etenevän.
%   Käsitteet määritellään.
%   Kun käsite ekaa kertaa: italics.


\begin{document}

\title{Internet-skaalan identiteetti: \\ ''Mitä eroa on OAuth 2.0 ja SAML 2.0 -standardeilla?''}
\author{Petrus Repo}
\date{\today}
\level{G!}
\maketitle


\onehalfspacing

\level{Graduluonnos}
\faculty{Matemaattis-luonnontieteellinen}
\department{Tietojenkäsittelytieteen laitos}
\subject{Tietojenkäsittelytiede}
\numberofpagesinformation{\numberofpages\ sivua}

\keywords{OpenID, OAuth, SAML, internet, autentikointi, auktorisointi}

\begin{abstract}

  \begin{verbatim}




                                                            ___
                                                         ,o88888
                                                      ,o8888888'
                                ,:o:o:oooo.        ,8O88Pd8888"
                            ,.::.::o:ooooOoOoO. ,oO8O8Pd888'"
                          ,.:.::o:ooOoOoOO8O8OOo.8OOPd8O8O"
                         , ..:.::o:ooOoOOOO8OOOOo.FdO8O8"
                        , ..:.::o:ooOoOO8O888O8O,COCOO"
                       , . ..:.::o:ooOoOOOO8OOOOCOCO"
                        . ..:.::o:ooOoOoOO8O8OCCCC"o
                           . ..:.::o:ooooOoCoCCC"o:o
                           . ..:.::o:o:,cooooCo"oo:o:
                        `   . . ..:.:cocoooo"'o:o:::'
                        .`   . ..::ccccoc"'o:o:o:::'
                       :.:.    ,c:cccc"':.:.:.:.:.'
                     ..:.:"'`::::c:"'..:.:.:.:.:.'
                   ...:.'.:.::::"'    . . . . .'
                  .. . ....:."' `   .  . . ''
                . . . ...."'
                .. . ."'
               .

  \end{verbatim}

\end{abstract}

\setcounter{tocdepth}{3}
\mytableofcontents

\section{Johdanto} % (fold)
\label{sec:johdanto}

% section johdanto (end)



\section{Autentikoituminen ja Web} % (fold)
\label{sec:autentikoituminen_ja_web}

  Web, SaaS, HTTP.
  Mikä on web-palvelu?
  Mikä on sisäinen palvelu?
  Mitä tarkoittaa autentikointi?
  Mitä tarkoittaa auktorisointi (authorization)?

  Rajataanko aihe SaaS-palveluihin, jotka julkisesti internetissä?
  - ei oteta kantaa sisäisiin palveluihin?

  Identity Management and Trust Services: Foundations for Cloud Computing
  % http://www.educause.edu/EDUCAUSE+Review/EDUCAUSEReviewMagazineVolume44/IdentityManagementandTrustServ/178410


  \subsection{Haaste--Vastine-autentikaatio} % (fold)
  \label{sub:haaste_vastine_autentikaatio}

  \emph{Haaste--vastine-autentikoinniksi} (\emph{challenge-response authentication}) kutsutaan autentikointitapaa, jossa toinen osapuoli esittää kysymyksen (haasteen), johon toisen osapuolen on tarjottava kelvollinen vastaus (vastine) \cite{NIST_SP800-63}. Haaste voi olla esimerkiksi satunnaisluku, jonka haastaja lähettää vastaajalle ja johon vastaaja yhdistää jonkin ennalta jaetun salaisuuden. Yhdistäminen voidaan tehdä esimerkiksi laskemalla tiiviste haasteesta ja salaisuudesta, joka lähetetään takaisin haastajalle. Koska haastaja tuntee jaetun salaisuuden, hän pystyy laskemaan oman versionsa tiivisteestä. Haaste voidaan hyväksyä, jos sekä haastajan itse laskema että vastaanottama tiiviste ovat identtiset \cite{NIST_SP800-63}.

  Autentikoituminen käyttäjätunnuksella ja salasanalla on yksi haaste--vastine-autentikoinnin sovellus. Salasana-autentikoinnissa toinen osapuoli kysyy käyttäjätunnusta ja salasanaa, johon toisen osapuolen on vastattava täsmälleen oikeanlaisella merkkijonoyhdsitelmällä.

  1990-luvun tietokonepeleissä oli usein kopionestosuojauksia, jotka häiritsivät tai estivät pelaamisen ellei käyttäjä tarjonnut oikeaa vastausta pelin esittämään haasteeseen. Yleensä haasteena oli jokin kysymys, johon löytyi vastaus pelin laillisen kopion mukana toimitetussa paperisessa ohjekirjassa. Motiivina oli tehdä laittoman pelikopion levittäminen pelkkien tiedostojen kopioimista vaivalloisemmaksi, koska tuohon aikaan laajan dokumentin kopioiminen oli työlästä, eivätkä kopiokoneet ja skannerit eivät olleet yleisiä. Tämän tutkielman kirjoittaja vietti ala-asteikäisenä monta iltaa kopioidessaan kynällä ja paperilla tällaisia koodikirjoja itselleen.

  Haasteeseen voi olla myös julkisesti tunnettu vastine. Spämmibottien torjumiseksi kehitetty CAPTCHA-testi (\emph{Completely Automated Public Turing test to tell Computers and Humans Apart}) kysyy kysymyksen (esittää haasteen), johon ihmisen on helppo vastata (tarjota vastine), mutta johon tietokone ei pysty luotettavasti tuottamaan oikeaa vastausta. CAPTCHA-haaste voi olla esimerkiksi yksinkertainen matemaattinen laskutoimitus, bittikarttakuvaan upotettu ihmissilmällä erottuva sana tai yksiselitteinen suomenkielinen kysymys, johon on yksiselitteinen ja yleisesti tunnettu vastaus.

  Captcha-kuva tähän.

  % subsection haaste_vastine_autentikaatio (end)

  \subsection{Salasanat ovat vallitseva käytäntö} % (fold)
  \label{sub:salasanat}
  Salasanojen vahvuus, ihmisten tapa käyttää salasanoja, salasanat kustannustehokas ratkaisu.
  Ihmiset eivät muista salasanoja. Sama salasana monessa paikassa. Ongelma.

  Yhdistä tähän kappaleet Salasanat ja Salasanat ovat vallitseva käytäntö

  Salasanat ovat yleisin tapa tunnistautua palveluihin internetissä \cite{study_of_passwords_07, passpet_06, password_management_strategies_06, pwdhash_extension_05}.
  Salasanan turvallisuus riippuu salasanan uniikkiuden lisäksi siitä, kuinka työläs se on arvata joko väkisin tai hyödyntäen sosiaalista tiedonkeruuta. Koska pitkät ja vaikeat salasanat ovat myös vaikeampia muistaa kuin lyhyet ja helpot, loppukäyttäjät päätyvät usein käyttämään samaa salasanaa monessa eri palvelussa \cite{study_of_passwords_07}. Huonoin vaihtoehto on, että käyttäjällä on lyhyt ja helppo salasana kaikissa käyttämissänsä palveluissa.

  Saman salasanan käyttäminen monessa palvelussa on riski. Jos käyttäjän salasana päätyy vääriin käsiin yhden palvelun kautta, vaarantuvat samalla kaikki muut palvelut, joissa käyttäjällä on sama salasana. Esimerkiksi joulukuussa 2010 Gawker.com-juorupalvelun tietomurron yhteydessä 1,3 miljoonaa salasanaa päätyi kerralla vääriin käsiin, kun kaikki kerätyt salasanat vuodettiin julkisiksi \cite{bbc_gawker_12_2010, forbes_gawker_12_2010}. Juorujen kommentoimiseksi luotujen käyttäjätunnusten vuotaminen oli ongelmallista, koska moni käyttäjä käytti samaa salasanaa myös muissa palvelussa. Tämän seurauksena esimerkiksi Twitterissä havaittiin käyttäjätunnuksia valloittanut spämmiaalto. Lisäksi mielenkiintoista oli, että vuodetuista salasanoista 1.958 kappaletta oli ''password'' \cite{forbes_gawker_12_2010}.

  Turvallinen salasana edellyttää hankalaa arvattavuutta ja uniikkiutta. Florêncio ja Herley \cite{study_of_passwords_07} tutkivat ihmisten salasanatapoja kolmen kuukauden ajan 500.000 käyttäjän aineistolla. He havaitsivat, että keskimääräisellä käyttäjällä on 6,5 salasanaa, joista jokainen on jaettu 3,9 eri palvelun kesken. Jokaisella käyttäjällä on keskimäärin 25 salasanaa vaativaa käyttäjätunnusta ja päivittäin kirjoitetaan keskimäärin 8 salasanaa. Käyttäjän ongelmana on siksi usein muistaa, mikä kuudesta eri salasanasta sopii juuri tiettyyn palveluun. Moni käyttäjä kokeilee palveluun vuorotellen kaikkia salasanojansa, kunnes oikea löytyy \cite{study_of_passwords_07}. Tämä on väärinkäytösten osalta ongelmallista, jos palvelu tallettaa kokeillut salasanat luettavassa muodossa jonnekin.

  % subsection salasanat (end)

  \subsection{Kaksivaiheinen autentikointi} % (fold)
  \label{sub:kaksivaiheinen_autentikointi}

  Perus-haaste-vastine-autentikoinnissa jos tietoliikenneyhteys (tai muu kommunikaatiokanava) ei ole turvallinen tai vastine muilla tavoin päätyy vääriin käsiin, salakuuntelija (eavesdropper) voi oppia jokaisen esitetyn haasteen vastineen, ja (väärin)käyttää vastinetta itse.
  Tällaisia mitm, troijalaiset, social engineering, olanylikatselu jne.

  Kaksivaiheinen tuo autentikointiin toisen lisävaiheen. Haaste--vastineessa käyttäjän on annettava esitettyyn haasteeseen kelvollinen vastine eli osoitettava toiselle osapuolelle että hän \emph{tietää} jotain. Kaksivaiheisessa autentikoinnissa käyttäjän on lisäksi osoitettava, että hänellä \emph{on hallussaan} jotain \cite{NIST_SP800-63, google_2step_2010}. Jälkimmäinen tekijä voidaan muodostaa esimerkiksi lähttämällä käyttäjän puhelinnumeroon vahvistuskoodin sisältävä tekstiviesti tai vaatimalla merkkijonoa, jonka jokin ulkoinen laite tuottaa. Autentikoinnin suorittamiseksi käyttäjän on tietyn ajan sisällä esitettävä kelvollinen vastine molempiin haasteisiin.

  Internet-palveluissa yleisin tapa on hyödyntää käyttäjän matkapuhelinta. Tekstiviestillä käyttäjä pystyy osoittamaan pitävänsä hallussa ennalta tunnettua puhelinnumeroa (hyvänä puolena toimivuus kaikissa tekstareita tukevissa puhelimissa). Toinen keino on hyödyntää Googlen \emph{Authenticator}-älypuhelinsovellusta, jonka hyvänä puolena on riippumattomuus puhelinverkkoyhteydestä, mutta toimiakseen sovellus vaatii tietynlaisen puhelinmallin. Google Authenticator on julkistettu avoimena lähdekoodina (todo lähdeviite http://code.google.com/p/google-authenticator/), minkä ansiosta sillä on mahdollista toteuttaa autentikoinnin kaksivaiheisuus myös muihin kuin Googlen-palveluihin.

  Internet-mittakaavassa ulkoisen laitteen edellyttäminen hankaloittaa autentikointitavan yleistymistä. Ulkoisista laitteista matkapuhelin on suosittu juuri yleistyneisyytensä vuoksi. On kuitenkin olemassa myös muita ulkoisia laitteita, jotka tarjoavat mahdollisuuden kaksivaiheistaa autentikointi -- näitä käytetään usein yritysverkoissa tai muissa keskitetysti hallituissa verkkoympäristöissä. Osa laitteista markkinoi itseänsä myös salasanan korvaajina: tällöin kyseessä on kuitenkin perinteinen yksivaiheinen haaste--vastine-autentikointi.

  Kaksivaiheinen autentikointi ei itsessään ratkaise \emph{man-in-the-middle}-ongelmaa \cite{schneier_2factor_2005}.
  Jos kolmas osapuoli pääsee tietoliikenneyhteyden väliin, hän voi välittää kaikki käyttäjän viestit eteenpäin. Man-in-the-Middle ei näe haastetta, jonka palveluntarjaoja lähettää kaksivaiheisessa autentikoinnissa käyttäjän matkapuhelimeen. Hän kuitenkin näkee käyttäjän haasteeseen tarjoaman vastineen ja pystyy välittämään sen eteenpäin palveluntarjoajalle. Vaikka tiedonsiirtokanava olisi turvallinen, troijalaisen tai vakoiluohjelmiston on edelleen mahdollista aiheuttaa MITM-turvallisuusongelma.

  Mitä hyötyä MITM? Onko relevantti gradun kannalta?


  % Esimerkkejä laitteista ovat YubiKey (http://www.yubico.com/yubikey, hyvänä puolena edullinen \$25 hinta), RSA SecurID (http://www.rsa.com/node.aspx?id=1156, huono julkisuus SecurID tietomurto 03/2011)
  % Tectia Mobile ID: Kun käyttäjä kirjautuu palveluun, kännykkään lähetetään (flash-)tekstiviestinä viisinumeroinen koodi, joka pitää syöttää palveluun normaalin salasanan lisäksi.

  % RSA Murto tapahtui Phishingillä: http://blogs.rsa.com/rivner/anatomy-of-an-attack/

  % TODO: lähdeviite
  % http://support.google.com/accounts/bin/answer.py?hl=en&answer=1066447
  % http://www.mnxsolutions.com/security/two-factor-ssh-with-google-authenticator.html

  % subsection kaksivaiheinen_autentikointi (end)

  \subsection{Sertifikaatit webissä} % (fold)
  \label{sub:sertifikaatit_webissä}
  Julkisen avaimen infrastruktuutri.
  Diffie-Hellman.
  Sertifikaatit, luotettava kolmas osapuoli.
  HTTP-yhteyden suojaus SSL/TLS-tekniikalla, HTTPS.
  Client-sertifikaatit. Ei vielä yleistynyt. Silti sama cert monessa eri palvelussa. Revoke hankalaa. OpenID+cert olis hyvä.
  WebID-draft.

  % subsection sertifikaatit_webissä (end)
% section autentikoituminen_ja_web (end)


\section{Uhat turvalliselle autentikoitumiselle} % (fold)
\label{sec:uhat_turvalliselle_autentikoitumiselle}
  Mitkä on Pihvin kannalta oleellisimmat?
  OAuth draftin threat model -dokumentti.
  Onko CSRF relevantti?
% section uhat_turvalliselle_autentikoitumiselle (end)

\section{Identiteetti internetissä} % (fold)
\label{sec:identiteetti_internetissä}
  7 Laws of Identity.
  Microsoftin visio identiteetistä. Miksi .NET Passport epäonnistui?
  Miksei OpenID yleistynyt?
  Miksi Facebook koetaan uhkana? (vrt 2500 sivua dataa keskivertokansalaisesta vs kgb/cia vs eu-lait)
  Miksei Facebook-tunnusta voi käyttää kaikkialla?
  Eri järjestelmien pitää toimia keskenään yhteen, jotta yksi identiteetti riittäisi.
  Fyysisen laitteen vaativat tekniikat, niiden ongelmat. (HST-kortti, SIM-kortti)
  Jos palvelu ei luota Facebook Connectiin mutta autentikoi käyttäjän FBC:llä, palvelu voi lisäksi kysyä omaa salasanaa (tai käyttää 2-factor).

  \subsection{Käyttäjäkeskeinen identiteetti} % (fold)
  \label{sub:käyttäjäkeskeinen_identiteetti}

  % subsection käyttäjäkeskeinen_identiteetti (end)

  \subsection{Saittikeskeinen/federated identiteetti} % (fold)
  \label{sub:saittikeskeinen_identiteetti}
  Onko saittikohtainen identity eri asia kuin federated identity?
  Tarviiko federated identityssä idp:n luottaa id consumeriin?
  - idp:n täytyy tuntea id consumer

  Tarvitseeko Facebook Connectissa idp:n tuntea idc?
    % - In order to log the user into your site, three things need to happen. First, Facebook needs to authenticate the user. This ensures that the user is who they say they are. Second, Facebook needs to authenticate your website. This ensures that the user is giving their information to your site and not someone else. Lastly, the user must explicitly authorize your website to access their information. This ensures that the user knows exactly what data they are disclosing to your site.
    % - auktorisointipäätös käyttäjälle itselleen (ei automaatille)


  % subsection saittikeskeinen_identiteetti (end)

  \subsection{Directed Identity} % (fold)
  \label{sub:directed_identity}

  % subsection directed_identity (end)

  \subsection{Korttiperusteinen identiteetti (card-based identity)} % (fold)
  \label{sub:korttiperusteinen_identiteetti_card_based_identity_}

  % subsection korttiperusteinen_identiteetti_card_based_identity_ (end)
  \subsection{Luottamusmalli (Trust Model)} % (fold)
  \label{sub:luottamusmalli_trust_model_}
  Milloin tarvitaan trust model? Kun halutaan vaihtaa dataa palvelujen kesken? Onko Facebook Connectissa Trust Model?

  Jos palvelu ei luota Facebook Connectiin mutta autentikoi käyttäjän FBC:llä, palvelu voi lisäksi kysyä omaa salasanaa (tai käyttää 2-factor).

  % subsection luottamusmalli_trust_model_ (end)
% section identiteetti_internetissä (end)


\section{Kertakirjautuminen internetissä (Single-Sign On, SSO)} % (fold)
\label{sec:Kertakirjautumisstandardit}
  \begin{quote}
      ''The fool saith, 'Put not all thy eggs in one basket' ...
      but the wise man saith, 'Put all your eggs in one basket, and watch that basket!' ''
      \\--- Mark Twain \cite{twain_eggs_1894}
  \end{quote}

  Onko CAS relevantti?
  Onko LDAP relevantti?
  Onko SASL relevantti?
  Onko Shibboleth relevantti? % https://wiki.shibboleth.net/confluence/display/SHIB2/UnderstandingShibboleth
  Miten Shibboleth ja SAML eroavat toisistaan? % http://shibboleth.internet2.edu/Shibboleth-SAML-FAQ.html
  Onko Information Cards relevantti?
  Onko User Provisioning käsitteenä relevantti?
  Vaikuttaako REST / SOAP siihen, mitä kannattaa käyttää?
  Onko WS-Trust ja WS-Federation relevantteja?

  Mikä on ''Circle of Trust?'' Onko se federated identityn juttu?

  Onko kaikissa relevanteissa protokollissa aina HTTP-rajapinta?
  - OpenID aina http, SAMLissa muitakin. Entä OAuth?

  Missä tilanteessa Microsoft Active Directory relevantti?
  - AD voi toimia SAML IdP:nä
  - Windows Live voi toimia OpenID IdP:nä
  - ''AD FS can interact with other WS-* and SAML 2.0 compliant federation services as federation partners.''
    % http://en.wikipedia.org/wiki/Active_Directory_Federation_Services



  \subsection{Kertauloskirjautuminen (Single-Sign Off)} % (fold)
  \label{sub:kertauloskirjautuminen}

  % subsection kerta (end)
  \subsection{OpenID} % (fold)
  \label{sub:openid}
  Mitä eroa on OpenID Connect ja OAuth 2.0 ?
  OAuth - palvelujen täytyy tuntea toisensa. Täytyykö OpenID-C:ssa?
  Onko OpenID-C edelleen user-centric id?

  Mikä on OpenID Abstract Binding ? (https://www.pingidentity.com/resource-center/openid.cfm)
  % The current OpenID version is 2.0. However a new version, OpenID AB/C, merges two different next-generation standards efforts, OpenID Abstract Binding and OpenID Connect, and is under construction. OpenID is a profiled protocol for the Federal ICAM initiative. OpenID 2.0 is only profiled for the lowest level of assurance described by the government guidance set out in NIST 800-63. Hopefully, the next generation of OpenID will be capable of all four assurance levels used today.

  % subsection openid (end)

  \subsection{OpenID Connect} % (fold)
  \label{sub:openid_connect}
  OpenID Connect: yhdistää tiedon jakamisen (oauth) ja autentikoitumisen (openid)

  http://www.webmonkey.com/2010/05/new-openid-connect-proposal-could-solve-many-of-the-social-webs-woes/

  % subsection openid_connect (end)


  \subsection{OAuth} % (fold)
  \label{sub:oauth}

  OAuth 1.0 syntyi sosiaalisen median tarpeesta jakaa käyttäjän dataa eri palvelujen kesken. Ennen OAuthia oli yleistä, että esimerkiksi Facebookista käyttäjän tietoja kysynyt palvelu kysyi suoraan käyttäjän Facebook-salasanaa. Tällaista voidaan kutsua salasana-antipatterniksi, koska käyttäjän salasana ei ole jakamisen jälkeen enää salainen -- jokainen Facebookista tietoa hakeva palvelu tuntee käyttäjän salasanan. OAuth 1.0:n mahdollisti luvan kysymisen käyttäjältä ennen tietojen jakamista palvelujen kesken. Kuitenkin ennen kaikkea sisäänkirjautuminen tehtiin ainoastaan datan omistavassa palvelussa eikä salasanaa tarvinnut enää syöttää kolmannen osapuolen toteuttamaan palveluun. Tällöin esimerkiksi käyttäjän kuvia halunnut palvelu ohjasi käyttäjän Facebookiin, jonne käyttäjä syötti salasanansa. Sen jälkeen käyttäjällä oli mahdollisuus hyväksyä tai hylätä tämä käyttöoikeuspyyntö.

  Tiivistetysti saitti S voi pyytää käyttäjän tietoja palvelusta P ilman että P:n salasanaa tarvitsee syöttää S:ään. Käyttäjän täytyy vahvistaa tietojen pyytäminen, eli S ei saa P:n tietoja salaa ilman käyttäjän lupaa.
  OAuth 2.0 tukee lisäksi myös autentikoitumista. OAuth 2.0 on vielä keskeneräinen draft. Facebook on vaikuttanut voimakkaasti draftin luomisprosessiin. OAuth 1.0 syntyi pitkälti Twitterin ja Googlen omien auktorisointiprotokollien pohjalta. 1.0:ssa ongelmia + Facebook Connect --> OAuth 2.0.

  OAuth 1.0 tuotti vastutusta kehittäjien keskuudessa. Ennen OAuthia esimerkiksi Twitter-integraatio onnistui HTTP Basic -autentikaatiolla, mikä mahdollisti käyttäjätietojen kyselyn yhdellä HTTP-pyynnöllä (http://user:password@palvelu.com/osoite). OAuth 1.0 monimutkaisti järjestelyä merkittävästi, koska ulkopuolisella kehittäjällä ei ollut enää pääsyä käyttäjän salasanaan ja, erityisesti, koska tietoja ei pystynyt enää hakemaan ilman käyttäjän lupaa.

  Käyttäjälle muutos on kuitenkin suuri, koska kohdepalvelun salasanaa ei tarvitse jakaa kolmannelle osapuolelle. Lisäksi käyttäjälle on mahdollista tarjota selkeä näkyvyys siihen, minkä tietojen jakamiseen hän on antanut luvan. Esimerkiksi Facebookin Developer -sivustolla huomautetaan ulkopuolisia kehittäjiä, että mitä laajempaan joukkoon käyttöoikeuksia pyydetään lupaa, sitä suurempi on oikeuksien myöntämisestä kieltäytyvä käyttäjäjoukko (https://developers.facebook.com/docs/authentication/). Tämä on merkittävä havainto, koska OAuthia edeltäneenä aikana käyttäjällä ei yleensä ollut mahdollisuutta rajata oikeuksia ollenkaan, koska kolmannen osapuolen palvelu pystyi tekemään pyytämällään käyttäjän salasanalla mitä vain.

  Tähän kuva siitä, miltä oikeuksien myöntäminen OAuthilla näyttää facebookissa.

  Luvan kysyminen mobiilissa on vaikeaa.

  Kaaviokuva / sanallinen dialogi autentikaatiosta enne oauth1.0, oauth2.0, palvelin-palvelin sekä erilaiset relevantit oauth-flowt.
  ks. Internet-Scale Identity Systems: An Overview and Comparison

  Onko OAuth federated identity vai saittikohtainen identity?
  Onko OAuth 2.0 sama REST-palveluille kuin WS-Trust and WS-Security for SOAP -palveluille? (https://www.pingidentity.com/resource-center/oauth-essentials.cfm)

  Kaaviokuva / sanallinen dialogi autentikaatiosta enne oauth1.0, oauth2.0, palvelin-palvelin sekä erilaiset relevantit oauth-flowt.
  ks. Internet-Scale Identity Systems: An Overview and Comparison

  Oauth-identiteetti on tiukasti kytketty tiettyyn palveluntarjoajaan (esim. Facebook).
  Ei ole käyttäjäkeskeinen: Käytettävän palvelun (identity consumer) on tuettava tiettyä palvelua esim tarjoamalla siihen liittyvä kuvake.

  OAuth flow't -- Facebook tukee monia eri flow'ta https://developers.facebook.com/docs/authentication/

  http://tools.ietf.org/html/draft-ietf-oauth-v2-22

  http://tools.ietf.org/html/draft-ietf-oauth-v2-threatmodel-01

  http://hueniverse.com/2010/05/introducing-oauth-2-0/
  ''OAuth is a security protocol that enables users to grant third-party access to their web resources without sharing their passwords.''
  ''Many luxury cars come with a valet key. It is a special key you give the parking attendant and unlike your regular key, will only allow the car to be driven a short distance while blocking access to the trunk and the onboard cell phone.''
  ''OAuth includes two main parts: obtaining a token by asking the user to grant access, and using tokens to access protected resources. The methods for obtaining an access token are called flows.''
  ''Bearer tokens: OAuth 2.0 provides a cryptography-free option for authentication which is based on existing cookie authentication architecture. Instead of sending signed requests using HMAC and token secrets, the token itself is used as a secret sent over HTTPS. This allows making API calls using cURL and other simple scripting tools without having to canonicalize the request and sign it.''
  ''Short-lived tokens with Long-lived authorizations: Instead of issuing a long lasting token (typically good for a year or unlimited lifetime), the server can issues a short-lived access token and a long lived refresh token. This allows clienta to obtain a new access token without having to involve the user again, but keeps access tokens limited. This feature was adopted from Yahoo!’s BBAuth protocol and later its OAuth 1.0 Session Extension.''


  ''This has been a sore point from the beginning with people arguing whether OAuth is an authentication protocol or an authorization protocol, with the word ‘delegation’ being used as a compromise. The truth is, OAuth contains both. The redirection-based flow is authorization (with user authentication left intentionally out of scope), and the signature flow is authentication. By separating the two, OAuth becomes more modular and easier to understand.'' http://hueniverse.com/2009/11/planning-for-oauth-2-0/

  % subsection oauth (end)

  \subsection{SAML} % (fold)
  \label{sub:saml}
  For real, mitä eroa on OAuth ja SAML
  https://www.pingidentity.com/resource-center/oauth-essentials.cfm
  https://www.pingidentity.com/resource-center/SAML-Tutorials-and-Resources.cfm

  % subsection saml (end)

  \subsection{Tekniikoiden yhtäläisyydet} % (fold)
  \label{sub:tekniikoiden_yhtäläisyydet}

  Sen jälkeen kun eri tekniikat on selitetty, yhteenvetokappaleeseen taulukko jossa parilla lauseella selitetään jokainen.
  + Voi olla toinenkin taulukko, jossa esim. front channel ja back channel jokaisen protokollan osalta.
  + Trust Model: RP/SP initiated; IDP initieated %; (esim definition of trust: "A reasonable expectation of confidence in an actor’s behavior")
  + Registration / Discovery % ("Discovery is similar to a Web search for an identity."; "Discovery can be preceded by a registration step: a step by which IDPs register themselves as providing a particular identity service for a given user. Such a registry could be located on the client or on a network endpoint.")

    % http://stackoverflow.com/questions/7699200/what-is-the-difference-between-openid-and-saml
    % SAML2 supports single sign-out - but OpenID does not
    % SAML2 service providers are coupled with the SAML2 Identity Providers, but OpenID relying parties are not coupled with OpenID Providers. OpenID has a discovery protocol which dynamically discovers the corresponding OpenID Provider, once an OpenID is given.
    % With SAML2, the user is coupled to the SAML2 IdP - your SAML2 identifier is only valid for the SAML2 IdP who issued it. But with OpenID, you own your identifier and you can map it to any OpenID Provider you wish.
    % SAML2 has different bindings while the only binding OpenID has is HTTP
    %
    %
  % subsection tekniikoiden_yhtäläisyydet (end)
% section Kertakirjautumisstandardit (end)


\section{Vertailu kertakirjautumisjärjestelmien soveltuvuusalueista} % (fold)
\label{sec:kertakirjautumisjärjestelmien_}

  Sen jälkeen kun eri tekniikat on selitetty, yhteenvetokappaleeseen taulukko jossa parilla lauseella selitetään jokainen.
  + Voi olla toinenkin taulukko, jossa esim. front channel ja back channel jokaisen protokollan osalta.
  + Trust Model: RP/SP initiated; IDP initieated; (esim definition of trust: A reasonable expectation of confidence in an actor’s behavior)
  + Registration / Discovery (Discovery is similar to a Web search for an identity.; Discovery can be preceded by a registration step: a step by which IDPs register themselves as providing a particular identity service for a given user. Such a registry could be located on the client or on a network endpoint.)

% section kertakirjautumisjärjestelmien_ (end)

\section{Yhteenveto} % (fold)
\label{sec:yhteenveto}

% section yhteenveto (end)

\bibliographystyle{tktl}
\bibliography{lahteet}

\lastpage

\end{document}