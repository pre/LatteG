\documentclass{tktltiki}
\usepackage{ae,aecompl}
\usepackage{url}
\usepackage{amsfonts}
\usepackage{color}
\usepackage{graphicx}

% rubber: module pdflatex
% rubber: pdflatex.options -Ppdf -t a4

\begin{document}

\title{Salasanoista ei päästä eroon.\\ --- Mutta äheltämisestä päästään!}
\author{Petrus Repo}
\date{\today}
\level{Sosiaalisen median tekniikat -seminaari}
\maketitle


\onehalfspacing

\level{Seminaarityö}
\faculty{Matemaattis-luonnontieteellinen}
\department{Tietojenkäsittelytieteen laitos}
\subject{Tietojenkäsittelytiede}
\numberofpagesinformation{\numberofpages\ sivua}

\keywords{}

\begin{abstract}

\end{abstract}

\setcounter{tocdepth}{3}
\mytableofcontents


\section{Johdanto}

Jesjes.

\section{Autentikoituminen ja web}

Autentikoituminen on identiteetin määrittämistä. 

Jos \emph{s} on väite, autentikointi vastaa kysymykseen ''Kuka sanoi \emph{s}?''.
Jos \emph{o} on väitteen kohde, auktorisointi (\emph{authorization}) vastaa kysymykseen ''Kenellä on pääsy kohteeseen \emph{o}?'' \cite{lampson_distributed_1992}.


Haaste--vastine-autentikoinniksi (\emph{challenge-response authentication}) kutsutaan autentikointitapaa, jossa toinen osapuoli esittää kysymyksen (haasteen), johon toisen osapuolen on tarjottava kelvollinen vastaus (vastine) \cite{NIST_SP800-63}. 

Haaste voi olla satunnaisluku, jonka haastaja lähettää vastaajalle ja johon vastaaja yhdistää jonkin ennalta jaetun salaisuuden. Yhdistäminen voidaan tehdä esimerkiksi laskemalla tiiviste haasteesta ja salaisuudesta, joka lähetetään takaisin haastajalle. Koska haastaja tuntee jaetun salaisuuden, haastaja pystyy laskemaan oman versionsa tiivisteestä. Haaste voidaan hyväksyä, jos haastajan laskema ja vastaanottama tiiviste ovat identtiset \cite{NIST_SP800-63}.

Autentikoituminen käyttäjätunnuksella ja salasanalla on yksi haaste--vastine-autentikoinnin sovellus. 
Muita yleisiä haaste--vastine-autentikoinnin sovelluksia ovat esimerkiksi spämmiesto CAPTCHA-tunnistuksella.

Tämän paperin yhteydessä tiedonsiirtokanava oletetaan turvalliseksi, eikä yhteyden salakuuntelua käsitellä riskinä.


\subsection{Kaksiosainen autentikointi}

Kaksiosaisessa autentikoinnissa (\emph{two-factor authentication}) käyttäjälle esitetään kaksi haastetta. Ensimmäinen haaste edellyttää vastineeksi jotain, jonka käyttäjä \emph{tietää} (salasana). Toisen haasteen vastineeksi edellytetään jotain, jota käyttäjällä \emph{on} (esimerkiksi puhelinnumero) \cite{NIST_SP800-63, google_2step_2010}. Jälkimmäinen tekijä voidaan muodostaa esimerkiksi lähttämällä käyttäjän puhelinnumeroon vahvistuskoodin sisältävä tekstiviesti tai vaatimalla koodia, jonka jokin ulkoinen laite tuottaa. Autentikoinnin suorittamiseksi käyttäjän on tietyn ajan sisällä esitettävä kelvollinen vastine molempiin haasteisiin.

Kaksiosainen autentikointi ei ratkaise man-in-the-middle-ongelmaa \cite{schneier_2factor_2005}. 
MITM esittely.
Tämän kirjoituksen puitteissa oletetaan käyttäjän yhteys ja päätelaite turvallisiksi.


\subsection{Sertifikaatit ja julkisen avaimen infrastruktuuri}

Julkisen avaimen infrastruktuuri mahdollistaa kahden osapuolen kommunikoimisen ilman yhteisesti jaettua salaisuutta. 
Salaukseen käytetään kahta avainta, jotka on luotu etukäteen ja samanaikaisesti. Toinen avaimista on julkinen ja toinen yksityinen. Kummalla tahansa avaimella salattu tieto on mahdollista purkaa avainparin toisella avaimella. Tämän johdosta tietyllä julkisella avaimella salattu tieto on mahdollista purkaa vain ja ainoastaan sitä vastaavalla yksityisellä avaimella -- ja päinvastoin. Kryptaus epäsymmetrisellä algoritmilla on merkittävästä hitaampaa kuin symmetrisellä, minkä johdosta ne eivät sovellu laajan tietomassan salaamiseen \cite{nist_pki_intro, NIST_SP800-63}. Sen sijaan niitä käytetään muun muassa autentikoinnissa ja tiedon yhtenäisyyden varmistamisessa.

Toiminnan perusteena on matemaattinen todennäköisyys. Sen perusteella julkista avainta vastaavaa yksityistä avainta ei ole käytännössä mahdollista arvata, koska yksityisen avaimen laskeminen väkisin vaatisi mahdottoman määrän laksenta-aikaa. Samaan todennäköisyyteen perustuu, että kaksi satunnaisesti generoitua avainparia eivät käytännössä koskaan ole identtiset.

HTTP-yhteys voidaan suojata Secure Sockets Layer ja Transport Layer Security -protokollalla. Näin suojattua HTTP-yhteyttä kutsutaan jäljempänä HTTPS-yhteydeksi. HTTPS-yhteydessä kohdepalvelimella on sertifikaatti, jonka on myöntänyt jokin sertifikaattiauktoriteetti (\emph{certificate authority}, CA). Käyttäjän selaimeen on etukäteen asetettu lista tunnetuista CA-toimijoista sekä jokaista CA-toimijaa vastaavan juurisertifikaatin julkinen komponentti. Tähän luottamukseen liittyy väärinkäytösriski \cite{certified_lies, observatory_for_the_ssliverse}, jota emme kuitenkaan käsittele tämän paperin yhteydessä tarkemmin.

Sertifikaatilla on julkinen komponentti ja yksityinen komponentti. 
Sertifikaattien toimintaperiaate on sama kuin julkisen avaimen infrastruktuurissa (\emph{public-key infrastructure}) \cite{nist_pki_intro, henry_story_foaf_ssl}.
Yksityinen komponentti on salainen, ja ainoastaan yksityisen komponentin tuntemalla on mahdollista osoittaa olevansa julkista komponenttia vastaava taho. Luotetun CA:n myöntämällä sertifikaatilla kohdepalvelin osoittaa olevansa domain-osoitettansa vastaava palvelu \cite{authenticated_names}.
Suojattu HTTPS-yhteys neuvotellaan palvelimen ja käyttäjän selaimen välille palvelimen sertifikaatin sisältämien tunnistautumistietojen perusteella.

Tavanomaisessa HTTPS-yhteydessä ainoastaan kohdepalvelimelta edellytetään sertifikaattia, koska käyttäjä tunnistetaan muilla keinoin -- kuten käyttäjätunnuksella ja salasanalla. 
Kuitenkin myös käyttäjä on mahdollista tunnistaa sertifikaatilla. Tällaista tunnistautumistapaa kutsutaan asiakassertifikaatiksi (\emph{client-certificate}) \cite{ henry_story_foaf_ssl }.
Tällöin suojattu yhteys neuvotellaan sekä palvelimen että käyttäjän sertifikaatin sisältämien tunnistutumistietojen perusteella. 
Tällöin käyttäjän tunnistaututuminen onnistuu jopa ilman salasanaa.


\subsection{Salasanat}
 \label{sec:passwords}
 
Salasanat ovat yleisin tapa tunnistautua palveluihin webissä \cite{study_of_passwords_07, passpet_06, password_management_strategies_06, pwdhash_extension_05}.
Salasanan turvallisuus riippuu uniikkiuden lisäksi siitä, kuinka vaikea se on arvata joko väkisin tai hyödyntäen sosiaalista tiedonkeruuta. Koska pitkät ja vaikeat salasanat ovat myös vaikeampia muistaa kuin lyhyet ja helpot, loppukäyttäjät päätyvät usein käyttämään samaa salasanaa monessa eri palvelussa \cite{study_of_passwords_07}. Huonoin vaihtoehto on, että käyttäjä käyttää lyhyttä ja helppoa salasanaa kaikissa käyttämissänsä palveluissa.

Saman salasanan käyttäminen monessa palvelussa on vaarallinen riski. Jos käyttäjän salasana päätyy vääriin käsiin yhden palvelun kautta, vaarantuvat samalla kaikki muut palvelut, joissa käyttäjällä on sama salasana. Esimerkiksi joulukuussa 2010 Gawker.com-juorupalvelun tietomurron yhteydessä 1,3 miljoonaa salasanaa päätyi kerralla vääriin käsiin, kun kaikki kerätyt salasanat vuodettiin julkiselle keskustelusivustolle \cite{bbc_gawker_12_2010, forbes_gawker_12_2010}. Juorujen kommentoimiseksi luotujen käyttäjätunnusten vuotaminen oli ongelmallista, koska moni käyttäjä käytti samaa salasanaa myös muissa palvelussa. Tämän seurauksena esimerkiksi Twitterissä havaittiin käyttäjätunnuksia valloittanut spämmiaalto. Lisäksi mielenkiintoista oli, että vuodetuista salasanoista 1.958 kappaletta oli ''password'' \cite{forbes_gawker_12_2010}. 

Turvallinen salasana edellyttää siis hankalaa arvattavuutta ja uniikkiutta. Florêncio ja Herley \cite{study_of_passwords_07} tutkivat ihmisten salasanatapoja kolmen kuukauden ajan 500.000 käyttäjän aineistolla. He havaitsivat, että keskimääräisellä käyttäjällä on 6,5 salasanaa, joista jokainen on jaettu 3,9 eri palvelun kesken. Jokaisella käyttäjällä on keskimäärin 25 salasanaa vaativaa käyttäjätunnusta ja päivittäin kirjoitetaan keskimäärin 8 salasanaa. Käyttäjän ongelmana on siksi usein muistaa, mikä kuudesta eri salasanasta sopii juuri tiettyyn palveluun. Moni käyttäjä kokeilee palveluun vuorotellen kaikkia salasanojansa, kunnes oikea löytyy \cite{study_of_passwords_07}. Tämä on väärinkäytösten osalta ongelmallista, jos palvelu tallettaa kokeillut salasanat luettavassa muodossa jonnekin.


\section{Menetelmiä autentikoitumiseen webissä}

\subsection{OpenID}
OpenID pyrkii ratkaisemaan 
\subsection{OAuth}
\subsection{WebID}
\subsection{OpenID autentikointistandardina}
\subsubsection{Periaate ja tavoite}
\subsubsection{Hyviä puolia}
\subsubsection{Huonoja puolia}
\subsubsection{Näkemys OpenID:stä}

\section{Salasanat ovat vallitseva käytäntö}

Salasana on palvelun toimittajan kannalta kustannustehokas autentikoitumismenetelmä, ja siksi salasanat ovat olleet vallitsevin tunnistamistapa vuosikymmenten ajan \cite{pw_auth_system_perspective_08}. Kuten kappaleessa~\ref{sec:passwords} esiteltiin, käyttäjillä on keskimäärin 6,5 eri salasanaa, joista jokainen on jaettu keskimäärin 3,9 eri palvelun kesken. Salasanojen jakaminen, yksinkertaisuus, unohtaminen, jakaminen, vaihtumattomuus ja arvattavuus on hyvin yleistä internetin käyttäjien kesken \cite{study_of_passwords_07, pw_auth_system_perspective_08, passpet_06}.

Helposti muistettavat salasanat ovat haavoittuvaisia \emph{sanakirjahyökkäykselle}, jossa hyökkääjä yrittää arvata salasanoja käyttäen ennalta valitun sanakirjan sanoja sekä niiden muunnoksia \cite{passpet_06}. Salasanan säännöllinen vaihtaminen pienentää todennäköisyyttä sanakirjahyökkäyksen onnistumiseen, jos jonkin käytetyn palvelun salasanat ovat päätyneet vääriin käsiin. Saman salasanan tai sen johdannaisten käyttäminen useassa palvelussa vaarantaa käyttäjätunnuksen turvallisuuden, mutta eri salasanan muistaminen moneen palveluun ja salasanan vaihtaminen usein kuitenkin on epätoivoinen taakka ihmisille \cite{passpet_06, pw_auth_system_perspective_08}.

Ihmiset unohtavat salasanansa säännöllisesti \cite{ponemon_pw_survey_06}. Florêncion ja Herleyn 500.000 käyttäjän tutkimuksessa \cite{study_of_passwords_07} esimerkiksi Yahoon salasananvaihtotoimintoa käytettiin 15~\% yhtä usein kuin sisäänkirjautumista. Microsoft UK:n salasanaselvityksen mukaan neljäsosa (27~\%) briteistä unohtavat salasanansa säännöllisesti \cite{microsoft_pw_survey_04}. Lähes puolet 46~\% käyttäjistä kertoivat helpon muistettavuuden ja 71~\% salasanan vahvuuden olevan yksi tärkeimmistä kriteereistä salasanan valinnassa \cite{symantec_pw_survey_10}. Kuitenkin salasana kirjoitetaan usein paperilapulle, joka sijoitetaan näppäimistön alle \cite{pw_auth_system_perspective_08}.

 % - ihmiset käyttävät samaa salasanaa pitkään (paha yhdistettynä muihin ongelmiin)
 % - salasanaa jaetaan
 % - huono salasana jaetaan useammin kuin hyvä \cite{study_of_passwords_07}
 % - phishing: datan \cite{study_of_passwords_07} perusteella 0,4 \% internetin käyttäjistä falls victim to a phishing attack a year


\subsection{Vaatimukset pilviyhteensopivalle autentikoinnille}

  \begin{quote}
      ''The fool saith, 'Put not all thy eggs in one basket' ... 
      but the wise man saith, 'Put all your eggs in one basket, and watch that basket!' ''
      \\--- Mark Twain \cite{twain_eggs_1894}
  \end {quote}

Salasanoja tarvitaan niin kauan kuin salasanan sijasta ei ole mahdollista autentikoitua sertifikaatilla jokaiseen käytettyyn pavleluun. Edellä todetun perusteella jokaiseen palveluun tulisi olla itsenäinen salasana. Itsenäisen salasanan tulisi olla vahva. Koska käyttäjän ei ole mahdollista muistaa sekä montaa erilaista vahvaa salasanaa että sitä, mihin palveluun mikäkin salasana käy, tarvitaan salasanojen hallintaa.



Tavoitteet salasanojen hallinnalle:

Jokaiseen palveluun generoidaan vahva salasana.
Samaa salasanaa käytetään vain yhdessä palvelussa.
Salasanat eivät ole johdannaisia toisistansa.
Käyttäjän ei tarvitse tietää palveluissa käyttämäänsä salasanaa.
Käyttäjä keksii ja muistaa yhden vahvan ja pitkän salasanan (salainen lause, \emph{passphrase}).


Tavoitteet pilviyhteensopivalle autentikoinnille:

Pilviyhteensopiva salasanahallinta edellyttää, että käyttäjä pääsee käyttämiinsä web-palveluihin miltä tahansa työasemalta. 
Salasanat sisältävä kokoelmatiedosto täytyy pystyä tallentamaan ja avaamaan verkossa olevasta palvelusta. 
Kokoelmatiedostoa säilytetään verkossa kryptatussa muodossa. 
Kryptauksessa käytetään avaimena käyttäjän keksimää riittävän vahvaa 
Kryptauksessa käytettyä avainta ei koskaan välitetä verkon yli.


Salasanojen purkaminen suoritetaan web-selaimessa selainlaajennoksen avulla.



\subsection{Katsaus olemassaoleviin toteutuksiin}
\subsection{}
\subsection{Rajoitteet}
 - Jokaiselle selaimelle oma plugin
 - Spyware ja MITM. 
 - DNS: Oletetaan että DNS palauttaa oikean IP osoitteen
 - Fokuksen varastaminen
 
% \section{Related Work}
%   Kamouflage: loss-resistant password management
%   http://portal.acm.org/citation.cfm?id=1888881.1888904&coll=DL&dl=GUIDE&CFID=2580387&CFTOKEN=49759375
%   
%   Secure passwords through enhanced hashing
%   http://portal.acm.org/citation.cfm?id=1855698.1855705&coll=DL&dl=GUIDE&CFID=2580387&CFTOKEN=49759375
%   
%   Passpet: convenient password management and phishing protection
%   http://portal.acm.org/citation.cfm?id=1143120.1143126&coll=DL&dl=GUIDE&CFID=2580387&CFTOKEN=49759375
  
  
\section{Jatkotutkimuksia}
\section{Yhteenveto}


\bibliographystyle{tktl}
\bibliography{lahteet}

\lastpage

\end{document}