  Tällöin myös käyttäjän identiteetin OpenID-tunniste muuttuu, jos siinä on käytetty lopettaneen yrityksen käytöstä poistuvaa verkkotunnusta. Lukuisat OpenID-identiteetintarjoajat mahdollistavat oman verkkotunnuksen käytön OpenID-tunnisteessa -- esimerkiksi Google Apps ja Yahoo!. Jos identiteetintarjoaja ei suoraan mahdollista oman verkkotunnuksen käyttöä, se voi silti olla mahdollista OpenID-delegoinnilla.




lue ja viittaa myös http://wiki.openid.net/w/page/12995200/OpenID%20Security%20Best%20Practices

XRDS Discovery https://sites.google.com/site/oauthgoog/fedlogininterp/openiddiscovery

email address discovery: http://hueniverse.com/2009/10/email-addresses-as-openids/

openid nascar problem (haluaa nähdä vain googlen logon):
http://factoryjoe.com/blog/2009/04/06/does-openid-need-to-be-hard/


\subsubsection{XRI ja Directed Identity} % (fold)
\label{ssub:xri_ja_directed_identity}

Current speciﬁcation of OpenID [1] states that an OpenID
identiﬁer is either a ”http” or ”https” URI [...] , or an XRI.
We classiﬁed only http and https identiﬁers, ignoring XRI.
The reasons are that almost nobody uses XRI, there is not
support in current browsers to resolve XRI and there is not
a standard way to get a HTML document from them.
-- A survey on OpenID identiﬁers


XRI on yhdentyyppinen URI. XRI on URN-tyypin skeema?



XRDS service links are all related to the OpenID protocol, despite XRDS
supports discovery of other types of services. Beyond authentication, OpenID
Simple Registration Extension and OpenID Attribute Exchange are popular
OpenID extensions supported by collected identiﬁers. They are followed by
provider policy authentication extensions (PAPE), which assert policies
applied by identity providers in order to assure end user authentication.
The most popular is phishing-resistant policies. The rest of services are
less common. \cite{openid_identifier_survey_2011}



 The premise of OpenID 1.x was that users would share one
  globally unique URL (or one of a presumably small set of URLs)
  with RPs. This stood in stark contrast to other Internet identity
  frameworks such as Liberty Alliance ID-WSF and Information
  Cards, which go to great lengths to use pairwise identifiers so
  they introduce no new correlation handles at the protocol level.
      OpenID Authentication 2.0 addressed this issue by adding support
  for “directed identity”—a term for the use of pairwise-unique
  identifiers coined by Microsoft Chief Identity Architect Kim
  Cameron [23]. This was accomplished by adding the new service
  endpoint type “http://specs.openid.net/auth/2.0/identifier_select”.
  When a user enters an OpenID identifier resolving to a service
  endpoint of this type (typically by entering the URL or i-name of
  their OpenID provider, rather than their own OpenID identifier),
  the RP knows it must ask the OP for the user’s identifier. The OP
  can then offer the user the choice of using one of their existing
  OpenID identifiers, or having the OP generate a pairwise-unique
  identifier for this specific relationship. In fact the user need not
  know or remember this identifier as the OP can store and
  automatically use it in future logins to the same RP.
      This directed identity feature  works with both URLs and XRIs,
  however by assigning XRI i-numbers in the OP’s own XRI
  delegation space, OPs can take advantage of their persistence and
  security features discussed above.
subsubsection xri_ja_directed_identity (end)

subsubsection openid_autentikoinnin_vaiheet (end)

\subsubsection{Identiteetin delegointi} % (fold)
\label{ssub:identiteetin_delegointi}

Selitetään mahdollisuus kytkeä oma verkkotunnus kolmannen osapuolen identitarjoaan delegoimalla identiteetti.

Käyttäjä --identiteetti--> verkkotunnus --delegointi--> idp jossa login

\begin{verbatim}
  <head>
  <link rel="openid2.provider"
    href="https://openid.stackexchange.com/openid/provider">
  <link rel="openid2.local_id"
    href="https://openid.stackexchange.com/user/a0cd3405-f76e-429e-b935">
  </head>

  todo viite http://blog.stackoverflow.com/2009/01/using-your-own-url-as-your-openid/
\end{verbatim}

Oman verkkotunnuksen hosting pitää olla turvallinen. Delegointia voi muuttaa jos pääsee käsiksi verkkotunnuksen tarjoamaan delegoinnin web-sivuun.
Google ei tästä syystä tue delegointia.
% subsubsection identiteetin_delegointi (end)


Google:
Guide to Running a User Account System
http://goo.gl/R8pMP

subsection openid (end)

\subsection{OpenID Connect} % (fold)
\label{sub:openid_connect}
OpenID Connect: yhdistää tiedon jakamisen (oauth) ja autentikoitumisen (openid)

http://www.webmonkey.com/2010/05/new-openid-connect-proposal-could-solve-many-of-the-social-webs-woes/



Federal Identity, Credentialing, and Access Management % http://www.idmanagement.gov/documents/ICAM_OpenID20Profile.pdf

ks http://stackoverflow.com/questions/3260557/openid-is-the-identifier-url-unique-what-are-the-differences-between-the-ident

subsection openid_connect (end)



-------------


https://openid.net/2011/04/29/a-map-for-openid-abc/


Directed Identity vs Identifier Select
http://willnorris.com/2009/07/openid-directed-identity-identifier-select


------------


Delegation no longer supported. Normaalikäyttäjällä ei ole omaa verkkotunnusta johon sais link-tägit.

OpenID Connect gives you three choices: use an identifier issued by an existing provider, use a provider that provides white-label OpenID services under your domain, or run your own provider. The first and second of these options are reasonable for your average user and the last is for us nerds.
http://www.apparently.me.uk/2010/05/important-changes-in-openid-connect.html


---------

OpenID in its current incarnation failed to get traction because of the anti-pattern of using urls instead of email addresses/usernames not because of a lack of personal information identifiers.
--
What seems to be missing from conversations around OpenID, and from the digital identity conversation in general, is a stated position on what we think online identity should look like in 2020. We should clarify not only the vision for the social web, but why normals should support that vision.

Given that most of the designers/coders/entrepreneurs involved in OpenID come from a similar pedigree, it may be useful to take a step back and consider the assumptions embedded in the digital details –

why does choice matter? why does privacy matter? why should online interaction mimic the offline world? is the goal to augment or replace offline connections, or are watching the creation of a new category of connection?

In trying to explain the vision for OpenID over the last few months I’ve had a hard time 1) locating it and 2) explaining WHY it matters. We ought to spend as much time on simplicity and clarity of vision as simplicity and clarity of button.
http://factoryjoe.com/blog/2010/05/16/combing-openid-and-oauth-with-openid-connect/


-------

http://seriouslyidentity.com/
http://www.planetidentity.org/


----------

 Microsoft InfoCardsin tavoitteena olla internet-skaalan identiteetin meta-framework. Kuitenkaan ei ole saanut riittävästi jalansijaa ja vaikuttaa kuolevan pois. OpenID + InfoCards toimivat yhteen. Ongelma on, että muille kuin Microsoft Windowsille ei ole kunnollista InfoCards-clienttiä. Kenen intresseissä sellaisen rakentaminen olisi? Entä mobiilissa?


 ----------

 % http://hueniverse.com/2009/04/introducing-sign-in-with-twitter-oauth-style-connect/
 %
 % OpenID is often described as a single-sign-on solution, or “the last username and password you will ever need”. OpenID is a federated authentication protocol – a protocol where users can use credentials from any compatible provider who can “speak” the OpenID protocol. But in this case, not any account will do. Twitter applications need Twitter accounts.
 %
 % It is important to understand that there are two different kind of single-sign-on solutions: delegated and federated. All the recent comparisons between OpenID and Facebook Connect failed to appreciate this fundamental difference. Facebook Connect is a delegated authentication service, while OpenID is a federated authentication service. They might offer very similar features, but they are very different.
 %
 % A delegated solution means that one site is simply outsourcing its authentication needs to another pre-selected site. If your site uses Facebook Connect, you are delegating your authentication facilities to Facebook. Visitors to your site cannot use any other accounts, only accounts from the vendors you have pre-selected.
 %
 % A federated solution means that visitors to your site can use any account they have, as long as it is compatible. It makes no difference to the site which account is being used, as long as it can interoperate. At its core, OpenID is a federated solution because its most important feature is the ability to use any OpenID account with any OpenID-enabled service.
 %
 %A good example is stores accepting credit cards. A store that accepts any Visa card is using federated payments – payments from any account that “speaks Visa”. But a store that accepts only credit cards issued by a specific vendor, for example, a department store branded card, use delegated payments. The reason why you no longer see many stores accepting only their own credit cards, is because it is bad for business.
 %
 % But not every OpenID implementation is federated, and this is the big dilemma OpenID has to resolve.
 %   -- linkki http://hueniverse.com/2009/02/does-openid-have-an-identity-crisis/
 %
 % The question is, can users use any account they want? If a site uses the Yahoo! OpenID service by using the Yahoo! button: xx
 %   but does not offer the ability to use other vendors, it is really just another delegated solution, even if it is powered by OpenID under the hood. In this case, OpenID becomes just a technical detail of the implementation, not part of its design.
 %
 % Much of the recent discussion about OpenID usability centers around using brands as a way to make the service more usable. But the problem with this approach is that is takes away most of the federated value out of OpenID, leaving it simply as a common protocol to implement proprietary delegated services. When implemented this way, OpenID adds no real value to services with an OAuth API.
 %
 % The question which solution to use for sign-in, OpenID or OAuth, is very much application specific. If you are building a brand new site that needs accounts, and want to leverage existing accounts from services such as Google, Yahoo!, and Microsoft, OpenID is a great option that will give your users a lot of flexibility. But if you are extending an existing service, implementing a specific API and building a site that has great dependencies on another service, OAuth gives you everything you need, for very little extra work.



 Käyttäjän oma verkkotunnus ja delegoitu autentikointi esim googleen (luotettavampaa)
 % http://stackoverflow.com/questions/2541526/delegate-openid-to-google-not-google-apps/2545245#2545245
 % <link rel="openid2.provider" href="https://www.google.com/accounts/o8/ud?source=profiles">
 % <link rel="openid2.local_id" href="https://profiles.google.com/[YOUR PROFILE ID]">



 % openid connect: http://openid.net/2011/05/20/openids-second-act-openid-connect/


 % OpenID Connect separates the user identifier from the user's profile URL
 % http://web.archive.org/web/20110720081501/http://openidconnect.com/
% profile url endpointista, user identifier on se minkä käyttäjä syöttää, verified identifier on se minkä idp palauttaa




Jaettu salaisuus luotettava ja ennen kaikkea yksinekrtainen toteutus vs signaturet ja assertiot. Mahdollista tehdä turvallisesti koska https suojaa kuljetuskerroksen. (ei applikaatiokerroksen tehtävä) Joinssain tapauksissa vaikeaa tai laskennallisesti liian työlästä käyttää ssl/tls, silloin signaturet. Käytännössä hyödyt ssl/tls:n soveltamisesta ovat suuremmat kuin haittapuolet~\cite{oauthwg_ssl_discussion_2010}.






Google
% \begin{figure}
%   \centering
%   \includegraphics[width=0.9\textwidth]{images/google_openid_diagram.png}
%   \caption{Sekvenssikaavio OpenID-autentikoinnista; Googlen suosittelema autentikointiprosessi (todo viite http://code.google.com/apis/accounts/docs/OpenID.html)}
%   \label{fig:sekvenssikaavio_google_openid}
% \end{figure}
%
% Kuva:
% 1. The web application asks the end user to log in by offering a set of log-in options, including using their Google account.
% 2. The user selects the "Sign in with Google" option. See Designing a Login User Interface for more options.
% 3. The web application sends a "discovery" request to Google to get information on the Google login authentication endpoint.
% 4. Google returns an XRDS document, which contains the endpoint address.
% 5. The web application sends a login authentication request to the Google endpoint address.
% 6. This action redirects the user to a Google Federated Login page, either in the same browser window or in a popup window, and the user is asked to sign in.
% Once logged in, Google displays a confirmation page (redirect version / popup version) and notifies the user that a third-party application is requesting authentication. The page asks the user to confirm or reject linking their Google account login with the web application login. If the web application is using OpenID+OAuth, the user is then asked to approve access to a specified set of Google services. Both the login and user information sharing must be approved by the user for authentication to continue. The user does not have the option of approving one but not the other.
% Note: If the user is already logged into their Google account, or has previously approved automatic login for this web application, the login step or the approval step (or both) may be skipped.
%
% 7. If the user approves the authentication, Google returns the user to the URL specified in the openid.return_to parameter of the original request. A Google-supplied identifier, which has no relationship to the user's actual Google account name or password, is appended as the query parameter openid.claimed_id. If the request also included attribute exchange, additional user information may be appended. For OpenID+OAuth, an authorized OAuth request token is also returned.
%
% 9. The web application uses the Google-supplied identifier to recognize the user and allow access to application features and data. For OpenID+OAuth, the web application uses the request token to continue the OAuth sequence and gain access to the user's Google services.
% Note: OpenID authentication for Google Apps (hosted) accounts requires an additional discovery step. See OpenID API for Google Apps accounts.



% User and idp discovery: http://hueniverse.com/2009/09/openid-and-lrdd/


% OpenID Connect, NIST LoA 2 tai 3
% http://www.thread-safe.com/2012/01/ficam-saml-20-web-sso-profile-updated.html

% Identiteetinkuluttaja voi vaatia OpenID idp:ltä PAPE-laajennoksen avulla tietyn turvallisuustason, esim. 2-factor autentikoinnin.



openid provider white list? jottei epäluotettavia idp:itä.
tekniseltä toimintavarmuudeltaan google ja facebook ovat erinomaisia koska takana suuri yhtiö, tavoite avoimiin standardeihin (oauth ja openid) ja valtava käyttäjämassa.



%: openid uses anonymous diffie-helman for an ad-hoc association establishment. Tämän seurauksena openid haavoittuvainen impersonointi ja man-in-the-middlelle. sertifikaatit eivät ole täydellinnen turva, ca-tietomurrot ja epärehelliset/valtion painostamat ca:t.



OpenID on single point of failure jos idp menee nurin. Tällöin idp:n käyttäjät eivät voi sisäänkirjautua palveluun. IDP:tä ei voi myöskään vaihtaa ilman että pääsee kirjautumaan sisään. Kannattaa tukea mahdollisuutta liittää monta identiteettiä samaan käyttäjätunnukseen (mutta se on epäkäytännöllistä). Ongelman välttämiseksi voi olla käytännöllistä tukea ainoastaan esivalittuja suuria identiteetintarjoajia. Jos kurssilla 10.000 opiskelijaa ja käyttäjäkunnasta 0,1~\% käyttää kaatunutta identiteetintarjoajaa, seurauksena 10 potentiaalista support-viestiä, jotka jonkun täytyy käsitellä kaiken muun kiireensä keskellä.
% Nurinmeneminen on ongelma jota ei voi ratkaista tekniikalla. Jokaisella ulkoistetulla identiteetintarjoajalla on riski palvelun lopettamisesta.
% http://nat.sakimura.org/2010/09/04/re-openid-provider-imploding-chaos-coming/
% tätä varten xdi.org ja tietojen escrow:

% http://nat.sakimura.org/2006/10/23/identity-20-and-mydentity/
% We would also have to think about the cases when this company gets bankrupt etc. What XDIORG does is to put the legal and contractual as well as technical infrastructure to cover such cases, such as creating the minimum standard of the service implementation, creating the rules so that one can move to another hosting company when needed, setting up escrow relationships so that people will not get caught by the sudden death of the hosting provider, determining what kind of insurance plan that hosting provider must purchase, etc. We need to vigorously think about those social fabrics. Technical considerations alone is not enough.
%
% By the way, technically, to achieve this kind of infrastructure, SAML alone is not enough and we have to have other technologies that assists the resolution of the authentication provider and determine the reputation of such. One candidate for such technology is XRI/XDI which is being standerdized at Oasis Open, the same institution that SAML got standerdized. XRI is a URN scheme that has built in delegation framework and a portion of it (XRDS) is being used as the centerpiece of a href=”http://www.yadis.org/”>Yadis, which is being used by OpenID, LID, and inames.



todo
Toinen single point of failure: jos joku pöllii salasanan. Yksi tunnus kaikkiin palveluihin. Yksi pölliminen johtaa moneen pöllimiseen. OpenID:n idc ja idp eivät tunne toisiaan--> openid-idp:n haltuunsa palauttanut käyttäjä ei voi poistaa oikeuksia idc:ltä (kuten oauthissa). Tällöin myöskään sessiot hyökkääjän ja idc:n välillä ei vanhene jos hyökkääjä ehtinyt avata sellaisen (toisin kuin oauthissa).



openid tarkoitettu federoitua autentikointia varten: asiakas vastaanottaa identity assertion miltä tahansa tarjoajalta (asiakas voi käyttää whitelistiä vai blacklistiä).
oauth tarkoitettu degoituun auktorisointiin: asiakas rekisteröityy tarjoajalle, joka tarjoaa käyttöoikeuspoletin joka valtuuttaa 3-osapuolen toimimaan loppukäyttäjän puolesta.
