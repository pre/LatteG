<!DOCTYPE html>
<html lang="en">
  <head>
  
    <title>
      Implementing Authentication in a Decentralized Environment:
      How Do I Log in to the Cloud ?
    </title>


    <link rel="stylesheet" href="stylesheets/lattex.css">

    <script src="javascripts/lattex.js"></script>

    <script src="hyphenator/Hyphenator.js" type="text/javascript"></script>
    <script type="text/javascript">
      Hyphenator.config({
        displaytogglebox : false,
        minwordlength : 4
      });

    Hyphenator.run();

    </script>


    <script>
      var conf = { 
        lol: true,
        cat: "loooong"
        };
    </script>



  </head>


  <body>

    <header>
      <h1 data-lattex="title"></h1>

      <address>
        Petrus Repo
      </address>

    </header>

    <p>
      <strong>Please note:</strong>
      This document will be formatted to conform with CS Dept's official
      layout as <a href="http://github.com/pre/LatteG">LatteG</a> matures.
    </p>

    <nav>
      <h1>Table of Contents</h1>
    </nav>


    <p>
      <strong>Please note:</strong>
      This document will be formatted to conform with CS Dept's official
      layout as <a href="http://github.com/pre/LatteG">LatteG</a> matures.
    </p>

    <article>
      <h1 data-lattex="title"></h1>

      <section>
        <h1>Introduction</h1>

        <pre>
          When the access to an object is restricted, the object must be controlled by a guard. The guard has two tasks that could be applied individually or in combination: identify the requester and decide whether access to the object should be granted. In order to do its work, the guard needs a trustworthy way to know both the source of the request and the access rule. Obtaining the source of the request is called "authentication" and interpreting the access rule is called "authorization" <cite>lampson_distributed_1992</cite>. In a nutshell authentication answers the question "Who said this?", and authorization answers the question "Who is trusted to access this?" [CITE, CITE, CITE].
          
          <!-- This might involve confirming the identity of a person or assuring that a programmatically made service request is a trusted one. -->

          From the end user's usability point of view, the most unobtrusive way for a user to authenticate to a service would be blindly trusting his claim of his identity. Since the obvious security concerns render this kind of an approach impractical, the end user must present sufficient credentials in order to gain access. A conventional web service usually maintains a credential database of its own, which leads users to bear the burden of learning a new password for each service they want to use. A substansial amount of users don't want to manage password: they simply use the same password among multiple services. Since using a different password would only affect the symptom instead of the cause, there clearly seems to be the need for a single sign on solution where a user can access multiple sites with a single piece of credentials. 

          There are also other ways to restrict access to an object. A popular method in web context is to obfuscate the universal resource indentifier (URI) which is a fundamental part of the resource's address. For example image filenames in Yahoo's <em>Flickr</em> photo sharing site and attachment filenames in Google's <em>GMail</em> include a hash that appears as a random string. Thus, although the resource is ultimately public since access to it is not monitored by a guard, it is available to only those who know the exact location. This kind of an approach does not require a guard monitoring the access by taking care of authentication and authorization. However, this technique is outside the scope of this thesis even though it could be used to complement a monitored access control system.

        <span style="display:none;">
          TÄLLÄINEN TARVITAAN: OMA TARVE (LV)
          Sen jälkeen ,mitä on tarjolla
          - it is not clear which existing technique should be chosen as a replacement
          - check the picture at Auth in distrib. systems page 275
          - The problem domain is restricted to only include approaches that are compatible with the cloud computing paradigm.
          - Oletus: Hardware, local OS, (ja encryption) oletetaan tässä yhteydessä luotetuiksi
          </span>
        </pre>
        
        <section>
          <h1>Research Questions and the Problem Domain</h1>

          <pre>
            Distributed access control has a couple of fundamental issues that need to be taken care of. One of them is secure communication between the authentication provider and the authentication consumer. The communication channel is assumed safe in the scope of this thesis because the transportation layer is secured and authenticated by SSL/TLS. This thesis is focused on the application layer where the first question lies in how the appropriate authentication provider is discovered. 
            The problem of discovery and end user redirection is illustrated in figure [IMG: X] as a blue rectangle (number 1).

            Another piece of the puzzle is building trust. There are two parties in the high-level scheme: the service which a user is wanting to access, and the service which holds the information about user's credentials. Let's call the former service authentication consumer ("AC") and the latter authentication provider ("AP"). After the user has successfully identified himself with "AP", he will have an authenticated session with "AP". In other words the AP now has appropriate information about the end user's identity. However, the service "AC", which the user really wants to access, still does not know who the user is. The second question arises: how can the appropriate information regarding the user's identity be delivered from "AP" to "AC"? This problem of building trust between authentication parties is illustrated in figure [IMG: X] as a red rectangle (number 2).

            <img alt="Sequence diagram"
                 class="fit-width"
                 title="Identification between the end user and multiple services." 
                 src="images/introduction_sequence_diagram.jpg"></img>
          </pre>
        </section>

        <section>
          <h1>A Brief Review of a Case of Central Authentication Service</h1>
          
          <pre>
            The Finnish Museum of Natural History has a single sign on system implemented with a homegrown authentication protocol. During the Autumn 2010 a severe security vulnerability was discovered in the way it builds trust between the authentication provider and the consuming services. There exists several solutions to fix the problem having fixing the current implementation and applying an existing authentication standard on the opposite ends of the solution range. It is definitely unclear which choice is appropriate: if the current homegrown protocol was previously insecure, what if another vulnerability exists also? On the other hand, the existing authentication standards seem to be much more complicated by their design.

            A crucial requirement for the Museum's system is to have all information regarding users' profile administrated only in place, and allow that particular system be responsible to authenticate users for all the other services. The nature of the environment is distributed with the authentication provider having a role of a trusted third party. There exists several different authentication and authorization standards for this problem domain, each one having down- and upsides of its own. This thesis provides a proposal table for choosing the right set standards for a particular set of requirements.

            At the beginning of 2009 OpenID had not yet been widely adopted and looked immature despite all the promises [CITE]. However, before the end of year 2009 major big companies, such as Google, Microsoft, PayPal, Flickr, VeriSign, WordPress and Yahoo, had announced support for OpenID enabled accounts <cite>openid_year2009</cite>. It was clear, that OpenID was starting to become a widely adopted standard for authentication. However, if a similar authentication system were to be implemented now, OpenID would still appear complicated. This thesis tries to answer why should one implement a basic setup of his own instead of applying a more complicated existing solution.
          </pre>
        </section>
      </section> <!-- Introduction -->
      
      <section>
          <h1>Providing Identity</h1>
          
          <span style="display:none;">
          <pre>
            Concept Definitions
            Confidentiality
            ISO standard 7498-2 <cite>iso_cia</cite> defines confidentiality as "ensuring that information is accessible only to those authorized to have access" having authorization as a function of the policy definition phase.
            Integrity
            Availability
            The Cloud Paradigm
            Software as a Service (SaaS)
            Access Control List (ACL)
            Open Standard
            Encryption
            "If you think cryptography will solve your security problems, you don't understand encryption and you don't understand security." - Bruce Schneier [CITE]
            Decentralized architecture
            Centralized architecture
            
            Terminology
              Relying Party (RP)
              Identity Provider (IdP)
              Token
              URL
              XRI
              Yadis XRDS
          </pre>
          </span>

          <section>
            <h1>User-centric Identity</h1>
            
            <pre>
              Giving full control of identity lifecycle to the customer is a prerequisite for user-centric identity. It allows the customer decide when and how their identity information can be accessed <cite>open_identity_management_saas_2009</cite>. The term "user-centric identity management" is understood to mean digital identity infrastructure where an individual end-user has substantially independent control over the use of their identifier(s) and personally-identifiable information <cite>openid_2.0_platform_2009</cite>. OpenID specification provides user-centric infrastructure with two overall architectures: an address-based and a card-based identity.

              An address-based identity employs a unique digital address to identify a user. The identification process is based on proving the ownership of a particular address. For example an OpenID identity address may be composed of a URL or an XRI. One of the first steps in the OpenID authentication process is dereferencing the identity address to discover and invoke the associated identity service <cite>openid_2.0_platform_2009</cite>.

              A card-based identity uses a digital token that contains or references a collection of attributes that may individually or collectively identify the user <cite>openid_2.0_platform_2009</cite>. The collection provides the necessary information to accomplish an identity-based transaction. Technologies that use the WS-Trust protocol employ a card-based identity.

              According to Recordon and Reed <cite>openid_2.0_platform_2009</cite> both approaches can be applied individually, but they also can complement each other. As an example an address-based identity could be used to discover a card-based identity, and a card-based identity could contain one or more address-based identities.
            </pre>
          </section>

          <section>
            <h1>Concepts of Authentication and Authorization</h1>
          
            <pre>
              Authentication is usually considered a synonym for confirming the identity of a person. In order to gain trust, a user must first be identified. Claiming an identity, however, does not necessarily lead to trust between the idenfitied user and the actual service: it only means that this visitor is able to present credentials for this identity. However, acquiring trust requires presenting identify first [CITE].

              Granting someone permissions to access a requested resource is generally called authorization. The authorization transaction is usually preceded by an authentication process to verify the identity of the requester. When the requester has been identified, the access control process checks that he be authorized to use the targeted resource. There are also cases where access can be granted without actually identifying the requester. Possible cases are requests that could, for instance, be authorized by requester's geological source address or simply by the time of the day. A request may also be authorized by an access token or ticket which grant access without proving the identity of the requester.

              Lampson et al. define a theory of authentication in distributed systems <cite>lampson_distributed_1992</cite>. They create an abstraction of many special cases to basic concepts of "principal, statement and channel". If s is a statement, for instance a request, then authentication answers the question "Who said s?" with a principal. Likewise, if o is an object, then authorization answers the question "Who is trusted to access o?" with a principal. A simple principal could for example be a person ("Peter"), a machine ("dac-123") or a role ("Manager"). A compound principal is build up of other principals such as "Peter as Manager" or "dac-123 as Department of CS" correspondingly.

              According to the theory of Lampson et al. <cite>lampson_distributed_1992</cite> a channel is the only kind of principal that can directly make statements to a computer. For example, there is no direct path from a person to a computer, that is, communication must be over some channel, involving keystrokes, wires, networks <em>et cetera</em>. Naturally some of these channels are not secure.
            </pre>
          </section>
          
      </section> <!-- Identity -->

      <section>
        <h1>Techniques for verifying integrity and confidentiality</h1>
        
        <section>
          <h1>Challenge-Response Authentication</h1>
          <pre>
            Challenge-Response authentication is a family of protocols, where one party presents a question (the challenge) for which the another party needs to provide a valid answer ("response") to be authenticated <cite>wikipedia:Challenge-response_authentication</cite>. A simple example of challenge-response protocol is password authentication where one party asks for a username and password of which the another party needs to provide valid combination.  However, if the communication channel may not be trusted, an eavesdropper might learn the response and exploit it.

            Software games of 1990s usually had piracy protection based on presenting a challenge and requiring a valid response for gameplay. Usually the challenge was an arbitrary question and the response could be found on a printed document which was delivered with a legal copy of the game. The motivation was that copying only the game files was not enough, and duplicating a printed document of codes was more difficult than only copying the files.

            Challenges may also involve a publicly known response. The motivation could, for instance, be restricting the group who may provide a response to only those who know Russian language, are familiar with an inside joke or are human users. A familiar example is a CAPTCHA verification for preventing spam-robot users. A challenge could be a simple mathematical operation asked in natural language or a number included in a scrambled bitmap image. The motivation is presenting a question which only a human is able to understand, although the actual answer is publicly known.
          </pre>
          
          <span style="display: none;">
            One-Way Hash Functions
            More elaborated use cases involve hash functions for calculating a hash value.
            Public Key Infrastructure (PKI)
          </span>
        </section>
        
        
      </section> <!-- Techniques -->

      <section style="display: none;">
        <h1>Access Control in the Cloud</h1>
        
        Concept in Theory

        Centralized authentication
        Decentralized authentication
        Authorization for decentralized services
      </section>

      <section>
        <h1>Security Considerations</h1>
      
        <span style="display: none;">
          Your OpenID identity provider is able to track all websites you log into. If you have only one OpenID, usability is high, but traceability is equally high. 
        </span>
      
        <section>
          <h1>Phising</h1>

          <pre>
            Phising is a form of online identity theft targetting to steal sensitive information from an end user <cite>phising_attacks_and_solutions_2007, why_phising_works_06, suspectibility_to_phising_2006</cite>.

            Victims are tricked into providing such information by a combination of spooﬁng techniques and social engineering <cite>visual_similarity_phising_2008</cite>. The process usually involves a fraudulent web site imitating a specific authentic site. The goal is to trick the user submitting his secret information to the fraudulent imitation site that could be later used by somebody else to access the original service. The user can be lured to a fraudulent phishing site in many ways. The most common way is to send the victim an email or instant message that asks him to visit a malicious site. The goal is to acquire sensitive information, such as a username and password, by masquerading the malicious site as a particular trustworthy entity.

            Phising is a widespread problem on the internet. Additionally its effects are especially emphasized in a single sign-on system. Studies of Dhamija et al. <cite>why_phising_works_06</cite> show that in order for a phising attempt to be effective, it must be targeted to a specific system. Since a single sign-on system provides access to multiple services, a successful phising attempt targeted against the identity provider affects all its identity consumers. Therefore identity providers are a viable target for phising by their very nature [CITE, CITE, CITE].

            Being an attractive target for phising might give an impression that single sign-on systems should be avoided for business critical services [CITE]. Nevertheless, studies have been made concluding that having a single service for identification might actually improve the general security of the service that are depending on it [CITE]. One big factor is that by nature any web service is, to some level, vulnerable to phising [CITE tai selitä aiemmin]. As previously explained, using a central identification provider allows a malicious party to focus his attack on that particular provider. But on the other hand, this also allows the service administrators to focus on the issues on only one particular identity provider [CITE]. Thus, if identification provider were to be implemented on a per service basis, it would require focusing on phising issues on each and every one of them.
          </pre>
        </section>

        <section>
          <h1>Phising Illustrated</h1>

          <pre>
            Several studies have shown [CITE, CITE, CITE] that humans are especially vulnerable to visual deception. Dhamija et al. <cite>why_phising_works_06</cite> provide empirical evidence about which phising strategies are successful at deceiving average users. Their study shows that some visual deception attacks can fool even the most sophisticated users. In order to "design web browsers, websites and other tools to shield users from such attacks," it is necessary to "understand which attack strategies are successful, and what proportion of users they fool." <cite>why_phising_works_06</cite>.

            The biggest nordic bank Nordea has been targeted several times for different phising attacks. A typical method has been to send a message illustrated in image [IMG: Nordea1] to thousands of recipients. Not all of the recipients are customers of the target service provider, but some are. And although not all of the customers will get fooled, some will. And because even one fooled customer means money for the attackers, phising is a lucrative criminal business.

            Phising message in image [IMG: Nordea1] includes an authentic looking link to the web bank and a request to go and fill all the one time passwords. The hyperlink is obfuscated: it does not lead where it points. Instead the link leads to a phising site illustrated in image [IMG: Nordea2] where the victim is supposed to fill in their unused passwords and all of the confirmation codes for Nordea's online banking <cite>nordea_fsecure_2006, nordea_miller_2006</cite>. The link also includes a unique identification code which allows the attacker to identify the recipient: consequentially it not necessary to ask for the customer's email address on the phising site.
          
            <img src="images/nordea_phising_email.jpg" 
                 title="Phising email targeted against Nordea customers in 2006"
                 alt="Example of a phising email"
                 class="fit-width">
               
            <img src="images/nordea_phising_website.png" 
                 title="Phising site asking for Nordea customers' e-bank accounts in the year 2006"
                 alt="Example of a phising website"
                 class="fit-width">
          
          
          
          
            <!--
              ENTÄ: Kohdennettu phising jossa netbank + troijalainen?
            -->
            
          </pre>
        </section>
      
        <section>
          <h1>Phising Solutions</h1>
        
          <pre>
            A good solution against the web site phising should be able to ensure the user's privacy, even if the user has sent such credentials to a falsified web server <cite>phising_attacks_and_solutions_2007</cite>. In other words, even if the phising site receives user's login credentials, they could not be re-used to log in to the legitimate system. Different kinds of schemes have been developed to achieve this, most interesting ones being implementing a two-factor authentication <cite>schneier_2factor_2005</cite>[CITE, CITE] on the application level and extending the TLS protocol [CITE, CITE] on the network protocol level.  
          </pre>
          
          <h1>Two-factor Authentication</h1>
          
          <pre>
            When challenge-response authentication is applied once, user is generally asked a password. A correct password is enough to complete the identification process. Two-factor authentication, also called as two-step verification, takes the process further. It provides the user with two challenges: first one depends on something that the user <em>knows</em> and second one on something that the user <em>has</em>. The user must respond with a valid answer to both of the challenges.
          </pre>
          
          
        </section>    
    
        <section style="display: none;">
      
          <h1>Studies on Phising</h1>

          Conclusively the standard security indicators in the browser context are not effective for a substantial fraction of end users.

          osoite:
          bankofvvest
          www.nordea.com.sitemod.sess26xvwcwbcnnzoycvszh.blockerey.tw/confirm/portal.aspx/login
          www.nordea.com:confirm/portal/login@62.236.117.4/the/real/address

          Terms
          - Certificate (digital certificate, public key certificate)
          - Certificate authority (CA)
          - HTTPS
          - Secure Sockets Layer (SSL) and Transport Layer Security (TLS)

          "The popular anti-phising method for OpenID is asking user to provide additional information when they sign up. When relaying party redirects the user to the OpenID provider, the information provided by the user appears firstly, [..] so user can identify whether it is a phising site [..]" <cite>open_identity_management_saas_2009</cite>.
          - Mutta entä jos phising site ei kysy mitään?
          - vs. "Dancing pigs"



          Nordea-huijaus
          Karhusivun käytettävyystutkimus
          Authentication methods
          TODO: pilko tekniikat lukujen authentication &amp; authorization alle
          Digital Identity Management
          Several ongoing studies are underway for safe and effective digital identity management [open_identity_management_saas_2009]. These include OASIS's SAML [CITE], Microsoft's WS-* [CITE], XX's Shibboleth [CITE] and YY's OpenID [CITE].
          OpenID
          OpenID is an open standard which supports decentralized architectures. OpenID 1.0 was originally developed in 2005 to allow lightweight authentication for blog post commenters in LiveJournal.com. [CITE] It is now deployed by a wide range of websites, particularly on sites having much user-generated content. As the user base has evolved, so has the need for new OpenID authentication features. Along the growth, the OpenID community has shared a common vision that OpenID could become and umbrella under which multiple technologies can fit. The intention has been to keep OpenID free and open so that no one company owned or controlled the specification <cite>openid_2.0_platform_2009</cite>.


          OAuth
          SAML
          WS-Trust, WS-Federation
          Shibboleth
          CAS

          Authorization methods
          <!-- trusted third party ?? -->

          Combining Authentication and Authorization
          Motivation
          Google's OpenID + OAuth proposal
          Shibboleth + OpenID 2.0
          Example Architecture Combining OpenID and OAuth
          Bin (et al.) propose a lightweight and user-centric identity management framework for SaaS ecosystem [open_identity_management_saas_2009].

          Examination of the Techniques
          Requirements for the Cloud Environment
          Comparison Matrix
      
        </section>

      </section>
      <section>
        <h1>Conclusions</h1>
        <pre>
          Here!
        </pre>
      </section>
      
    </article>


    <article class="references">
      <h1>References</h1>
      <dl>
        <dt data-lattex="phising_attacks_and_solutions_2007">Moh07</dt>
        <dd>
          B. Mohamad, I. Hajjeh, and S. El Sawda, "Phishing Attacks and Solutions," Proceedings of the Third International Mobile Multimedia Communications Conference, 2007.
        </dd>

        <dt data-lattex="why_phising_works_06">Dha06</dt>
        <dd>
          R. Dhamija, J.D. Tygar, and M. Hearst, "Why phishing works," Proceedings of the SIGCHI conference on Human Factors in computing systems - CHI '06, 2006, p. 581.
        </dd>

        <dt data-lattex="suspectibility_to_phising_2006">Dow06</dt>
        <dd>
          J.S. Downs, M.B. Holbrook, and L.F. Cranor, "Decision strategies and susceptibility to phishing," Proceedings of the second symposium on Usable privacy and security - SOUPS '06, vol. 15213, 2006, p. 79.
        </dd>

        <dt data-lattex="visual_similarity_phising_2008">Med08</dt>
        <dd>
          E. Medvet, E. Kirda, and C. Kruegel, "Visual-similarity-based phishing detection," Proceedings of the 4th international conference on Security and privacy in communication netowrks - SecureComm '08, 2008, p. 1.
        </dd>

        <dt data-lattex="schneier_2factor_2005">Sch05</dt>
        <dd>
          B. Schneier, "Two-Factor Authentication: Too Little, Too Late," Communications of the ACM, 2005, pp. 136-136.
        </dd>
        
        <dt data-lattex="lampson_distributed_1992">Lam92</dt>
        <dd>
          B. Lampson, M. Abadi, M. Burrows, and E. Wobber, "Authentication in distributed systems: theory and practice," ACM Transactions on Computer Systems, vol. 10, 1992, pp. 265-310.
        </dd>

        <dt data-lattex="iso_cia">ISO89</dt>
        <dd>
          ISO 7498-2 Information Processing Systems - Open Systems Interconnection - Basic Reference Model - Part 2: Security Architecture. ISO/IEC 1989
        </dd>

        <dt data-lattex="open_identity_management_saas_2009">Bin09</dt>
        <dd>
          W. Bin, H.H. Yuan, L.X. Xi, and X.J. Min, "Open Identity Management Framework for SaaS Ecosystem," 2009 IEEE International Conference on e-Business Engineering, 2009, pp. 512-517.
        </dd>
        
        
        <dt data-lattex="openid_2.0_platform_2009">Rec09</dt>
        <dd>
          D. Recordon and D. Reed, "OpenID 2 . 0 : A Platform for User-Centric Identity Management," 2006, pp. 11-15.
        </dd>

        <!--
        <dt data-lattex=""></dt>
        <dd>
          
        </dd>
        -->


        <!-- WIKIPEDIA -->
        <dt data-lattex="wikipedia:Challenge-response_authentication">Wik10a</dt>
        <dd>
          http://en.wikipedia.org/wiki/Challenge-response_authentication
        </dd>

        <dt data-lattex="wikipedia_authentication">Wik10b</dt>
        <dd>
          http://en.wikipedia.org/wiki/Authentication
        </dd>

        <dt data-lattex="wikipedia_authorization">Wik10c</dt>
        <dd>
          http://en.wikipedia.org/wiki/Authorization
        </dd>

        <!-- WEBSIVUT -->
        <dt data-lattex="openid_year2009">Web09a</dt>
        <dd>
          http://openid.net/2009/12/16/openid-2009-year-in-review/
        </dd>
        
        <dt data-lattex="nordea_fsecure_2006">WebX06a</dt>
        <dd>
          Website: F-Secure blog post about Nordea phising, http://www.f-secure.com/weblog/archives/00000849.html
        </dd>

        <dt data-lattex="nordea_miller_2006">WebX06b</dt>
        <dd>
          Website: Scam Report on Nordea phising http://www.millersmiles.co.uk/report/2464
        </dd>


      </dl>
          
    </article>


    <footer>
      <span data-lattex="pagenumber"></span>  <span>&copy; pottisheads</span>
    </footer>
    

  </body>

</html>
